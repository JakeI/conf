#!/usr/bin/env python3

from pandocfilters import toJSONFilter


def use_item_markers(key, value, format, meta):
    markers = [
        "ï€", "ï¡ˆ", "ï€°", "ï¢€", "â˜Ž", "ðŸ—¬", "ï‡¢", "ï…¤", "ï…¥", "âš ", "ðŸ›‡", "â€¼", "â‰",
        "ðŸ—", "ðŸ—€", "ïƒª", "ï€", "ïƒ ", "ï ”", "ï¢™", "ï‰Š", 
        "ï¢”", "ï‘•", "â§—", "ï”Ÿ",
        "ï€®", "ðŸ—", "ï€­", "ï ±",
        "â‡¿", "â†³"
    ]
    markers = { k: k for k in markers }

    markers["[âœ“]"] = "\\checkboxCheck"  # Defined in `grrek.sty`
    markers["â˜’"] = "\\checkboxCheck"
    markers["[âœ—]"] = "\\checkboxCross"
    markers["[ ]"] = "\\checkboxEmpty"
    markers["â˜"] = "\\checkboxEmpty"
    markers["[â—]"] = "\\checkboxIncompleate"

    markers["[-]"] = "\\faMinus"
    markers["[+]"] = "\\faPlus"

    if format != 'latex':
        return
    if key == "BulletList":
        change = False
        for item in value:
            if len(item) > 0:
                it = item[0]
                if "c" in it and len(it["c"]) > 1:
                    first = it["c"][0]
                    if first["t"] == "Str" and first["c"] in markers:
                        first["t"] = "RawInline"
                        first["c"] = ["latex", f"[{markers[first['c']]}]"]
                        # first["c"] = "fuck"
        if change:
            return value

if __name__ == "__main__":
    toJSONFilter(use_item_markers)
